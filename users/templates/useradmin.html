{% extends "index.html" %}
{% load static %}

{% block styles %}
    <link href="{% static 'css/user-admin-style.css' %}" rel="stylesheet"> 
{% endblock styles %}

{% block contenido %}
    <h1>Listado de Usuarios</h1>
    <!--Create new User-->
    <button id="btn-documents" class="btn btn-primary btn-add-documents" data-toggle="modal" data-target="#myModal">Agregar nuevo usuario</button>
    <div class="modal" id="myModal">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body"> 
                    <form action="{% url 'usersList' %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="{{ form.email.id_for_label }}">Correo electrónico:</label>
                            <input type="email" class="form-control" id="email" name="email" required>
                        </div>
                        <div class="form-group">
                            <label for="{{ form.username.id_for_label }}">Nombre de Usuario:</label>
                            <input type="text" class="form-control" id="username" name="username" required>
                        </div>
                        <div class="form-group">
                            <label for="{{ form.user_type.id_for_label }}">Tipo de usuario:</label>
                            <select class="form-control dimension" id="user_type" name="user_type" required>
                                <option value="Creador y Editor de datos">Creador y Editor de datos</option>
                                <option value="Usuario">Usuario</option>   
                                <option value="Administrador de Roles">Administrador de Roles</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="{{ form.user_rol.id_for_label }}">Puesto:</label>
                            <input type="text" class="form-control" id="user_rol" name="user_rol" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Guardar</button>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cerrar</button>
                </div>
            </div>
        </div> 
    </div>
    <!--End create user-->

    <div class="card-body">
        <div class="table-responsive">
            <table class="table" id="user-table" width="100%" cellspacing="1">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Nombre de Usuario</th>
                        <th>Tipo de Usuario</th>
                        <th>Puesto</th>
                        <th>Correo electrónico</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for user in users %}
                        <tr>
                            <td>{{ forloop.counter }}</td>
                            <td>{{ user.username }}</td>
                            <td>{{ user.perfil.user_type }}</td>
                            <td>{{ user.perfil.user_rol }}</td>
                            <td>{{ user.email }}</td>
                            <td>
                                <a class="btn btn-primary" href="{% url 'userEdit' pk=user.pk %}">Editar</a>
                                <a href="{% url 'userDelete' pk=user.pk %}">
                                    <button class="bin-button">
                                    </button>
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    {% block scripts %}
        <script src="{% static 'js/user.js' %}"></script>
    {% endblock scripts %}
{% endblock contenido %}
